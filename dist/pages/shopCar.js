"use strict";require(["../script/config.js"],function(){require(["jquery","swiper","common","template","jqueryCookie","bootstrap"],function(n,t,i,p,l){n(function(){n("#header").load("common/header.html",function(){n(".phone p").html(i.createDate()),require(["headerJs"],function(){})}),n("#footer").load("common/footer.html");var s=n("<div class='temp'></div>");if(n("body").append(s),i.getCookie("message")){var t=function(t){t.parent().find("input").val(a);var s=t.parent().siblings().eq(2).text(),o=parseInt(s.slice(1,s.length)),e=parseInt(t.parent().find("input").val());t.parent().siblings().eq(3).text("￥"+o*e)},o=function(){var t=n(".shopSum").text().split("￥");t.shift();var s=0;t.forEach(function(t){s+=parseInt(t)}),n(".shopBoxPay em i").text("￥"+s)};n(".shopBoxLists").removeClass("emptyStyle");var e=JSON.parse(l.cookie("message"));0==e.length?(n(".shopBoxLists").addClass("emptyStyle"),s.load("./templates/templates_shopCar.html",function(){var t=p("shopCarEmpty");n(".shopBoxLists").html(t)})):s.load("./templates/templates_shopCar.html",function(){var t=p("shopCarItems",{list:e});n(".shopBoxLists").html(t)});var a=1;n(".shopBoxLists").on("focus",".shopCount",function(){n(this).val("")}),n(".shopBoxLists").on("change",".shopCount",function(){/^\d+$/.test(n(this).val())?(a=parseInt(n(this).val()),t(n(this)),o()):n(this).val("请写数字")}),n(".shopBoxLists").on("click",".downbtn",function(){console.log("-"),console.log(n(this).parent().find("input").val()),--a<=0&&(a=0),t(n(this)),o()}),n(".shopBoxLists").on("click",".upbtn",function(){console.log("+"),a++,t(n(this)),o()}),n(".shopBoxLists").on("click",".delbtn",function(){n(this).parent().parent().remove();for(var t=0;t<e.length;t++)e[t].goodsId===n(this).attr("goodsid")&&e.splice(t,1);l.cookie("message",JSON.stringify(e),{expires:7}),0==e.length&&(n(".shopBoxLists").addClass("emptyStyle"),s.load("./templates/templates_shopCar.html",function(){var t=p("shopCarEmpty");n(".shopBoxLists").html(t)})),o()}),s.load("./templates/templates_shopCar.html",function(){var t=p("shopCarPay");n(".shopBoxPay").html(t),o()})}else n(".shopBoxLists").addClass("emptyStyle"),s.load("./templates/templates_shopCar.html",function(){var t=p("shopCarEmpty");n(".shopBoxLists").html(t)})})})});